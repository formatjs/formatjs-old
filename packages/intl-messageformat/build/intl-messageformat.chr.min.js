!function(a,b){"use strict";var c=a.Intl||a.IntlPolyfill,d=b(c);"function"==typeof define&&define.amd&&define(d),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=d),a&&(a.IntlMessageFormat=d)}("undefined"!=typeof global?global:this,function(a){"use strict";function b(a,c,d){if("string"==typeof a&&(a=b.__parse(a)),!a||"number"!=typeof a.length)throw new TypeError("A pattern must be provided as a String or Array.");d=this._mergeFormats(b.FORMATS,d),t(this,"_locale",{value:this._resolveLocale(c)}),a=this._compilePattern(a,c,d),t(this,"_pattern",{value:a}),this.format=v.call(this.format,this)}function c(a){var b=a.match(w);return b?new d(b[1]):a}function d(a){this.valueName=a}function e(a,b){this.valueName=a,this.options=b}function f(a,b,c){this.valueName=a,this.options=b,this.pluralFunction=c}function g(a,b){var c,d,e,f,g,h=/[{}]/g,i=[],j=0,k=0;for(e=h.exec(a);e;){if(j+="{"===e[0]?1:-1,0>j)throw new Error("Imbalanced bracket detected at index "+e.index+' for message "'+a+'"');0===j&&(c=e.index+1,i.push(a.slice(k,c)),k=c),1===j&&k!==e.index&&(d=a.slice(k,e.index),-1===d.indexOf("{")&&(i.push(d),k=e.index)),e=h.exec(a)}if(0!==j)throw new Error("Brackets were not properly closed: "+a);if(k!==a.length&&i.push(a.slice(k)),b)for(f=0,g=i.length;g>f;f++)i[f]=i[f].replace(/^\s+|\s+$/gm,"");return i}function h(a){return a.replace(/^\{\s*/,"").replace(/\s*\}$/,"")}function i(a){return a.indexOf("{")>=0}function j(a,b){var c,d,e,f,g;if(a.options={},b.length%2)throw new Error("Options must come in pairs: "+b.join(", "));for(g=0,f=b.length;f>g;g+=2)e=b[g],d=b[g+1],a.options[e]=d,c=c||"other"===e;if(!c)throw new Error('Options must include default "other" option: '+b.join(", "));return a}function k(a,b){return a.format=b[0],a}function l(a,b,c){var d={type:c.type,valueName:b[1]},e=b[2]&&g(b[2],!0);return c.tokenParser&&e&&(d=c.tokenParser(d,e)),c.postParser&&(d=c.postParser(d)),d}function m(a,b){var c,d;for(c=0,d=x.length;d>c;c++)if(n(x[c],a,b))return a[b];return a[b]}function n(a,b,c){var d,e,f,g,h=b[c],i=h.match(a.regex),j=[];if(i){if(d=a.parse(h,i,a),b[c]=d,d&&d.options&&"object"==typeof d.options)for(e in d.options)d.options.hasOwnProperty(e)&&j.push(e);for(f=0,g=j.length;g>f;f++)o(d,j[f],a);return!0}return!!i}function o(a,b,c){var d=a.options&&a.options[b];d=h(d),a.options[b]=p(d,c.outputFormatter)}function p(a,b){var c,d,e;if(!i(a))return b?b(a):[a];for(c=g(a),d=0,e=c.length;e>d;d++)"{"===c[d].charAt(0)&&(c[d]=m(c,d));return c}function q(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(b=0,c=f.length;c>b;b+=1)if(d=f[b])for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);return a}if(!a)throw new ReferenceError("Intl must be available");var r=Object.prototype.hasOwnProperty,s=function(){try{return!!Object.defineProperty({},"a",{})}catch(a){return!1}}(),t=(!s&&!Object.prototype.__defineGetter__,s?Object.defineProperty:function(a,b,c){"get"in c&&a.__defineGetter__?a.__defineGetter__(b,c.get):(!r.call(a,b)||"value"in c)&&(a[b]=c.value)}),u=Object.create||function(a,b){function c(){}var d,e;c.prototype=a,d=new c;for(e in b)r.call(b,e)&&t(d,e,b[e]);return d},v=Function.prototype.bind||function(a){var b=this,c=[].slice.call(arguments,1);return function(){b.apply(a,c.concat([].slice.call(arguments)))}};t(b,"FORMATS",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),t(b,"__availableLocales__",{value:[]}),t(b,"__localeData__",{value:u(null)}),t(b,"__addLocaleData",{value:function(a){if(!a||!a.locale)throw new Error("Object passed does not identify itself with a valid language tag");if(!a.messageformat)throw new Error("Object passed does not contain locale data for IntlMessageFormat");var c=b.__availableLocales__,d=b.__localeData__,e=a.locale.toLowerCase().split("-")[0];c.push(e),d[e]=a.messageformat,void 0===b.defaultLocale&&(b.defaultLocale=e)}}),t(b,"__parse",{value:p}),t(b,"defaultLocale",{enumerable:!0,writable:!0}),b.prototype.format=function(a){return this._format(this._pattern,a)},b.prototype.resolvedOptions=function(){return{locale:this._locale}},b.prototype._compilePattern=function(d,g,h){"string"==typeof d&&(d=[d]);var i,j,k,l,m,n,o,p,q,s,t,u=this._locale,v=b.__localeData__,w=[];for(i=0,j=d.length;j>i;i+=1)if(k=d[i],"string"!=typeof k){if(l=k.type,m=k.valueName,p=k.options){s={};for(q in p)r.call(p,q)&&(t=p[q],"plural"===l&&"string"==typeof t&&t.indexOf("${#}")>=0?(t=t.match(/(.*)\${#}(.*)/),s[q]=[t[1],{valueName:m,format:new a.NumberFormat(g).format},t[2]]):s[q]=this._compilePattern(t,g,h))}switch(l){case"date":n=h.date[k.format],w.push({valueName:m,format:new a.DateTimeFormat(g,n).format});break;case"time":n=h.time[k.format],w.push({valueName:m,format:new a.DateTimeFormat(g,n).format});break;case"number":n=h.number[k.format],w.push({valueName:m,format:new a.NumberFormat(g,n).format});break;case"plural":o=v[u].pluralFunction,w.push(new f(m,s,o));break;case"select":w.push(new e(m,s));break;default:throw new Error("Message pattern part at index "+i+" does not have a valid type")}}else w.push(c(k));return w},b.prototype._format=function(a,b){var c,d,e,f,g,h,i="";for(c=0,d=a.length;d>c;c+=1)if(e=a[c],"string"!=typeof e){if(f=e.valueName,!b||!r.call(b,f))throw new Error("A value must be provided for: "+f);g=b[f],h=e.options,i+=h?this._format(e.getOption(g),b):e.format(g)}else i+=e;return i},b.prototype._mergeFormats=function(a,b){var c,d,e={};for(c in a)r.call(a,c)&&(e[c]=d=u(a[c]),b&&r.call(b,c)&&q(d,b[c]));return e},b.prototype._resolveLocale=function(a){var c,d,e,f=b.__availableLocales__;if(0===f.length)throw new Error("No locale data has been provided for IntlMessageFormat yet");if("string"==typeof a&&(a=[a]),a&&a.length)for(d=0,e=a.length;e>d;d+=1){if(c=a[d].toLowerCase().split("-")[0],!/[a-z]{2,3}/i.test(c))throw new RangeError('"'+a[d]+'" is not a structurally valid language tag');if(f.indexOf(c)>=0)break}return c||b.defaultLocale};var w=/^\${([-\w]+)}$/;d.prototype.format=function(a){return a?"string"==typeof a?a:String(a):""},e.prototype.getOption=function(a){var b=this.options;return b[a]||b.other},f.prototype.getOption=function(a){var b=this.options,c=this.pluralFunction(a);return b[c]||b.other};var x=[{type:"string",regex:/^{\s*([-\w]+)\s*}$/,parse:l,postParser:function(a){return"${"+a.valueName+"}"}},{type:"select",regex:/^{\s*([-\w]+)\s*,\s*select\s*,\s*(.*)\s*}$/,parse:l,tokenParser:j},{type:"plural",regex:/^{\s*([-\w]+)\s*,\s*plural\s*,\s*(.*)\s*}$/,parse:l,tokenParser:j,outputFormatter:function(a){return a.replace(/#/g,"${#}")}},{type:"time",regex:/^{\s*([-\w]+)\s*,\s*time(?:,(.*))?\s*}$/,parse:l,tokenParser:k,postParser:function(a){return a.format=a.format||"medium",a}},{type:"date",regex:/^{\s*([-\w]+)\s*,\s*date(?:,(.*))?\s*}$/,parse:l,tokenParser:k,postParser:function(a){return a.format=a.format||"medium",a}},{type:"number",regex:/^{\s*([-\w]+)\s*,\s*number(?:,(.*))?\s*}$/,parse:l,tokenParser:k},{type:"custom",regex:/^{\s*([-\w]+)\s*,\s*([a-zA-Z]*)(?:,(.*))?\s*}$/,parse:l,tokenParser:k}];return b}),IntlMessageFormat.__addLocaleData({locale:"chr",messageformat:{pluralFunction:function(a){return a=Math.floor(a),1===a?"one":"other"}}});
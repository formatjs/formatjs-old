!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).IntlMessageFormat=r()}(this,function(){"use strict";var n,t=(n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),a=(r.prototype.compile=function(t){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(t)},r.prototype.compileMessage=function(t){var r=this;if(!t||"messageFormatPattern"!==t.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var e=t.elements,n=e.filter(function(t){return"messageTextElement"===t.type||"argumentElement"===t.type}).map(function(t){return"messageTextElement"===t.type?r.compileMessageText(t):r.compileArgument(t)});if(n.length!==e.length)throw new Error("Message element does not have a valid type");return n},r.prototype.compileMessageText=function(t){return this.currentPlural&&/(^|[^\\])#/g.test(t.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new f(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,t.value)):t.value.replace(/\\#/g,"#")},r.prototype.compileArgument=function(t){var r=t.format,e=t.id;if(!r)return new u(e);var n=this.formats,o=this.locales;switch(r.type){case"numberFormat":return{id:e,format:new Intl.NumberFormat(o,n.number[r.style]).format};case"dateFormat":return{id:e,format:new Intl.DateTimeFormat(o,n.date[r.style]).format};case"timeFormat":return{id:e,format:new Intl.DateTimeFormat(o,n.time[r.style]).format};case"pluralFormat":return new s(e,r.ordinal,r.offset,this.compileOptions(t),o);case"selectFormat":return new m(e,this.compileOptions(t));default:throw new Error("Message element does not have a valid format type")}},r.prototype.compileOptions=function(t){var e=this,r=t.format,n=r.options;this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===r.type?t:null;var o=n.reduce(function(t,r){return t[r.selector]=e.compileMessage(r.value),t},{});return this.currentPlural=this.pluralStack.pop(),o},r);function r(t,r){this.locales=[],this.formats={number:{},date:{},time:{}},this.pluralNumberFormat=null,this.currentPlural=null,this.pluralStack=[],this.locales=t,this.formats=r}function e(t){this.id=t}var o,u=(t(i,o=e),i.prototype.format=function(t){return t||"number"==typeof t?"string"==typeof t?t:String(t):""},i);function i(){return null!==o&&o.apply(this,arguments)||this}var s=(c.prototype.getOption=function(t){var r=this.options;return r["="+t]||r[this.pluralRules.select(t-this.offset)]||r.other},c);function c(t,r,e,n,o){this.id=t,this.offset=e,this.options=n,this.pluralRules=new Intl.PluralRules(o,{type:r?"ordinal":"cardinal"})}var l,f=(t(p,l=e),p.prototype.format=function(t){var r=this.numberFormat.format(t-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+r).replace(/\\#/g,"#")},p);function p(t,r,e,n){var o=l.call(this,t)||this;return o.offset=r,o.numberFormat=e,o.string=n,o}var m=(h.prototype.getOption=function(t){var r=this.options;return r[t]||r.other},h);function h(t,r){this.id=t,this.options=r}var d,g,y=(d=Gt,g=Error,v.prototype=g.prototype,d.prototype=new v,Gt.buildMessage=function(t,r){var e,u={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?i(t.parts[r][0])+"-"+i(t.parts[r][1]):i(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){var r,e,n,o=new Array(t.length);for(r=0;r<t.length;r++)o[r]=(n=t[r],u[n.type](n));if(o.sort(),0<o.length){for(e=r=1;r<o.length;r++)o[r-1]!==o[r]&&(o[e]=o[r],e++);o.length=e}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+((e=r)?'"'+o(e)+'"':"end of input")+" found."},{SyntaxError:Gt,parse:function(s,t){t=void 0!==t?t:{};var r,e,n,o,c={},u={start:Nt},i=Nt,a=function(t){return{type:"messageFormatPattern",elements:t,location:Pt()}},l=function(t){return t.reduce(function(t,r){return t.concat(r)},[]).join("")},f=function(t){return{type:"messageTextElement",value:t,location:Pt()}},p=/^[^ \t\n\r,.+={}#]/,m=St([" ","\t","\n","\r",",",".","+","=","{","}","#"],!0,!1),h="{",d=Et("{",!1),g=",",y=Et(",",!1),v="}",b=Et("}",!1),A=function(t,r){return{type:"argumentElement",id:t,format:r&&r[2],location:Pt()}},w="number",F=Et("number",!1),x="date",O=Et("date",!1),_="time",C=Et("time",!1),P=function(t,r){return{type:t+"Format",style:r&&r[2],location:Pt()}},E="plural",S=Et("plural",!1),T=function(t){return{type:t.type,ordinal:!1,offset:t.offset||0,options:t.options,location:Pt()}},j="selectordinal",I=Et("selectordinal",!1),M=function(t){return{type:t.type,ordinal:!0,offset:t.offset||0,options:t.options,location:Pt()}},N="select",k=Et("select",!1),R=function(t){return{type:"selectFormat",options:t,location:Pt()}},L="=",D=Et("=",!1),Z=function(t,r){return{type:"optionalFormatPattern",selector:t,value:r,location:Pt()}},U="offset:",W=Et("offset:",!1),$=function(t){return t},q=function(t,r){return{type:"pluralFormat",offset:t,options:r,location:Pt()}},z=Tt("whitespace"),B=/^[ \t\n\r]/,G=St([" ","\t","\n","\r"],!1,!1),H=Tt("optionalWhitespace"),J=/^[0-9]/,K=St([["0","9"]],!1,!1),Q=/^[0-9a-f]/i,V=St([["0","9"],["a","f"]],!1,!0),X="0",Y=Et("0",!1),tt=/^[1-9]/,rt=St([["1","9"]],!1,!1),et=function(t){return parseInt(t,10)},nt=/^[^{}\\\0-\x1F\x7F \t\n\r]/,ot=St(["{","}","\\",["\0",""],""," ","\t","\n","\r"],!0,!1),ut="\\\\",it=Et("\\\\",!1),at=function(){return"\\"},st="\\#",ct=Et("\\#",!1),lt=function(){return"\\#"},ft="\\{",pt=Et("\\{",!1),mt=function(){return"{"},ht="\\}",dt=Et("\\}",!1),gt=function(){return"}"},yt="\\u",vt=Et("\\u",!1),bt=function(t){return String.fromCharCode(parseInt(t,16))},At=function(t){return t.join("")},wt=0,Ft=0,xt=[{line:1,column:1}],Ot=0,_t=[],Ct=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=u[t.startRule]}function Pt(){return It(Ft,wt)}function Et(t,r){return{type:"literal",text:t,ignoreCase:r}}function St(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Tt(t){return{type:"other",description:t}}function jt(t){var r,e=xt[t];if(e)return e;for(r=t-1;!xt[r];)r--;for(e={line:(e=xt[r]).line,column:e.column};r<t;)10===s.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return xt[t]=e}function It(t,r){var e=jt(t),n=jt(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function Mt(t){wt<Ot||(Ot<wt&&(Ot=wt,_t=[]),_t.push(t))}function Nt(){return kt()}function kt(){var t,r,e;for(t=wt,r=[],e=Rt();e!==c;)r.push(e),e=Rt();return r!==c&&(Ft=t,r=a(r)),t=r}function Rt(){var t;return(t=function(){var t,r;return t=wt,(r=function(){var t,r,e,n,o,u;if(r=[],e=t=wt,(e=(n=Ut())!==c?(o=Bt())!==c&&(u=Ut())!==c?n=[n,o,u]:(wt=e,c):(wt=e,c))!==c)for(;e!==c;)r.push(e),e=wt,n=Ut(),e=n!==c&&(o=Bt())!==c&&(u=Ut())!==c?n=[n,o,u]:(wt=e,c);else r=c;return r!==c&&(Ft=t,r=l(r)),(t=r)===c&&(t=wt,r=Zt(),t=r!==c?s.substring(t,wt):r),t}())!==c&&(Ft=t,r=f(r)),t=r}())===c&&(t=function(){var t,r,e,n,o,u,i;return t=wt,123===s.charCodeAt(wt)?(r=h,wt++):(r=c,0===Ct&&Mt(d)),t=r!==c?Ut()!==c&&(e=function(){var t,r,e;if((t=qt())===c){if(t=wt,r=[],p.test(s.charAt(wt))?(e=s.charAt(wt),wt++):(e=c,0===Ct&&Mt(m)),e!==c)for(;e!==c;)r.push(e),p.test(s.charAt(wt))?(e=s.charAt(wt),wt++):(e=c,0===Ct&&Mt(m));else r=c;t=r!==c?s.substring(t,wt):r}return t}())!==c&&Ut()!==c?(n=wt,44===s.charCodeAt(wt)?(o=g,wt++):(o=c,0===Ct&&Mt(y)),(n=o!==c&&(u=Ut())!==c&&(i=function(){var t;return(t=function(){var t,r,e,n,o,u;return t=wt,s.substr(wt,6)===w?(r=w,wt+=6):(r=c,0===Ct&&Mt(F)),r===c&&(s.substr(wt,4)===x?(r=x,wt+=4):(r=c,0===Ct&&Mt(O)),r===c&&(s.substr(wt,4)===_?(r=_,wt+=4):(r=c,0===Ct&&Mt(C)))),t=r!==c?Ut()!==c?(e=wt,44===s.charCodeAt(wt)?(n=g,wt++):(n=c,0===Ct&&Mt(y)),(e=n!==c&&(o=Ut())!==c&&(u=Bt())!==c?n=[n,o,u]:(wt=e,c))===c&&(e=null),e!==c?(Ft=t,r=P(r,e)):(wt=t,c)):(wt=t,c):(wt=t,c)}())===c&&(t=function(){var t,r,e,n;return t=wt,s.substr(wt,6)===E?(r=E,wt+=6):(r=c,0===Ct&&Mt(S)),t=r!==c?Ut()!==c?(44===s.charCodeAt(wt)?(e=g,wt++):(e=c,0===Ct&&Mt(y)),e!==c&&Ut()!==c&&(n=Dt())!==c?(Ft=t,r=T(n)):(wt=t,c)):(wt=t,c):(wt=t,c)}())===c&&(t=function(){var t,r,e,n;return t=wt,s.substr(wt,13)===j?(r=j,wt+=13):(r=c,0===Ct&&Mt(I)),t=r!==c?Ut()!==c?(44===s.charCodeAt(wt)?(e=g,wt++):(e=c,0===Ct&&Mt(y)),e!==c&&Ut()!==c&&(n=Dt())!==c?(Ft=t,r=M(n)):(wt=t,c)):(wt=t,c):(wt=t,c)}())===c&&(t=function(){var t,r,e,n,o;if(t=wt,s.substr(wt,6)===N?(r=N,wt+=6):(r=c,0===Ct&&Mt(k)),r!==c)if(Ut()!==c)if(44===s.charCodeAt(wt)?(e=g,wt++):(e=c,0===Ct&&Mt(y)),e!==c)if(Ut()!==c){if(n=[],(o=Lt())!==c)for(;o!==c;)n.push(o),o=Lt();else n=c;t=n!==c?(Ft=t,r=R(n)):(wt=t,c)}else wt=t,t=c;else wt=t,t=c;else wt=t,t=c;else wt=t,t=c;return t}()),t}())!==c?o=[o,u,i]:(wt=n,c))===c&&(n=null),n!==c&&(o=Ut())!==c?(125===s.charCodeAt(wt)?(u=v,wt++):(u=c,0===Ct&&Mt(b)),u!==c?(Ft=t,r=A(e,n)):(wt=t,c)):(wt=t,c)):(wt=t,c):(wt=t,c)}()),t}function Lt(){var t,r,e,n,o;return t=wt,t=Ut()!==c&&(r=function(){var t,r,e,n;return r=t=wt,61===s.charCodeAt(wt)?(e=L,wt++):(e=c,0===Ct&&Mt(D)),(t=(r=e!==c&&(n=qt())!==c?e=[e,n]:(wt=r,c))!==c?s.substring(t,wt):r)===c&&(t=Bt()),t}())!==c&&Ut()!==c?(123===s.charCodeAt(wt)?(e=h,wt++):(e=c,0===Ct&&Mt(d)),e!==c&&(n=kt())!==c?(125===s.charCodeAt(wt)?(o=v,wt++):(o=c,0===Ct&&Mt(b)),o!==c?(Ft=t,Z(r,n)):(wt=t,c)):(wt=t,c)):(wt=t,c)}function Dt(){var t,r,e,n;if(t=wt,(r=function(){var t,r,e;return t=wt,s.substr(wt,7)===U?(r=U,wt+=7):(r=c,0===Ct&&Mt(W)),t=r!==c&&Ut()!==c&&(e=qt())!==c?(Ft=t,r=$(e)):(wt=t,c)}())===c&&(r=null),r!==c)if(Ut()!==c){if(e=[],(n=Lt())!==c)for(;n!==c;)e.push(n),n=Lt();else e=c;t=e!==c?(Ft=t,r=q(r,e)):(wt=t,c)}else wt=t,t=c;else wt=t,t=c;return t}function Zt(){var t,r;if(Ct++,t=[],B.test(s.charAt(wt))?(r=s.charAt(wt),wt++):(r=c,0===Ct&&Mt(G)),r!==c)for(;r!==c;)t.push(r),B.test(s.charAt(wt))?(r=s.charAt(wt),wt++):(r=c,0===Ct&&Mt(G));else t=c;return Ct--,t===c&&(r=c,0===Ct&&Mt(z)),t}function Ut(){var t,r,e;for(Ct++,t=wt,r=[],e=Zt();e!==c;)r.push(e),e=Zt();return t=r!==c?s.substring(t,wt):r,Ct--,t===c&&(r=c,0===Ct&&Mt(H)),t}function Wt(){var t;return J.test(s.charAt(wt))?(t=s.charAt(wt),wt++):(t=c,0===Ct&&Mt(K)),t}function $t(){var t;return Q.test(s.charAt(wt))?(t=s.charAt(wt),wt++):(t=c,0===Ct&&Mt(V)),t}function qt(){var t,r,e,n,o,u;if(t=wt,48===s.charCodeAt(wt)?(r=X,wt++):(r=c,0===Ct&&Mt(Y)),r===c){if(e=r=wt,tt.test(s.charAt(wt))?(n=s.charAt(wt),wt++):(n=c,0===Ct&&Mt(rt)),n!==c){for(o=[],u=Wt();u!==c;)o.push(u),u=Wt();e=o!==c?n=[n,o]:(wt=e,c)}else wt=e,e=c;r=e!==c?s.substring(r,wt):e}return r!==c&&(Ft=t,r=et(r)),t=r}function zt(){var t,r,e,n,o,u,i,a;return nt.test(s.charAt(wt))?(t=s.charAt(wt),wt++):(t=c,0===Ct&&Mt(ot)),t===c&&(t=wt,s.substr(wt,2)===ut?(r=ut,wt+=2):(r=c,0===Ct&&Mt(it)),r!==c&&(Ft=t,r=at()),(t=r)===c&&(t=wt,s.substr(wt,2)===st?(r=st,wt+=2):(r=c,0===Ct&&Mt(ct)),r!==c&&(Ft=t,r=lt()),(t=r)===c&&(t=wt,s.substr(wt,2)===ft?(r=ft,wt+=2):(r=c,0===Ct&&Mt(pt)),r!==c&&(Ft=t,r=mt()),(t=r)===c&&(t=wt,s.substr(wt,2)===ht?(r=ht,wt+=2):(r=c,0===Ct&&Mt(dt)),r!==c&&(Ft=t,r=gt()),(t=r)===c&&(t=wt,s.substr(wt,2)===yt?(r=yt,wt+=2):(r=c,0===Ct&&Mt(vt)),t=r!==c?(n=e=wt,(e=(n=(o=$t())!==c&&(u=$t())!==c&&(i=$t())!==c&&(a=$t())!==c?o=[o,u,i,a]:(wt=n,c))!==c?s.substring(e,wt):n)!==c?(Ft=t,r=bt(e)):(wt=t,c)):(wt=t,c)))))),t}function Bt(){var t,r,e;if(t=wt,r=[],(e=zt())!==c)for(;e!==c;)r.push(e),e=zt();else r=c;return r!==c&&(Ft=t,r=At(r)),t=r}if((r=i())!==c&&wt===s.length)return r;throw r!==c&&wt<s.length&&Mt({type:"end"}),e=_t,n=Ot<s.length?s.charAt(Ot):null,o=Ot<s.length?It(Ot,Ot+1):It(Ot,Ot),new Gt(Gt.buildMessage(e,n),e,n,o)}});function Gt(t,r,e,n){this.message=t,this.expected=r,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Gt)}function v(){this.constructor=d}var b,A=(b=function(t,r){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}b(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),w=function(){return(w=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function F(e,n){return n?Object.keys(e).reduce(function(t,r){return t[r]=function(e,n){return n?w({},e||{},n||{},Object.keys(e).reduce(function(t,r){return t[r]=w({},e[r],n[r]||{}),t},{})):e}(e[r],n[r]),t},w({},e)):e}var x,O=(x=Error,A(_,x),_);function _(t,r){var e=x.call(this,t)||this;return e.variableId=r,e}var C=function(r,t,e){void 0===t&&(t=C.defaultLocale);var n="string"==typeof r?C.__parse(r):r;if(!n||"messageFormatPattern"!==n.type)throw new TypeError("A message must be provided as a String or AST.");var o=F(C.formats,e),u=function(t){"string"==typeof t&&(t=[t]);try{return Intl.NumberFormat.supportedLocalesOf(t,{localeMatcher:"best fit"})[0]}catch(t){return C.defaultLocale}}(t||[]),i=new a(t,o).compile(n);return{format:function(t){try{return function t(r,e){for(var n="",o=0,u=r;o<u.length;o++){var i=u[o];if("string"!=typeof i){var a=i.id;if(!(e&&a in e))throw new O("A value must be provided for: "+a,a);var s=e[a];i.options?n+=t(i.getOption(s),e):n+=i.format(s)}else n+=i}return n}(i,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+r+"'"):t}},resolvedOptions:function(){return{locale:u}}}};return C.defaultLocale="en",C.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},C.__parse=y.parse,C});
//# sourceMappingURL=intl-messageformat.min.js.map
